--- phlib-1.18/Makefile.in.orig	Wed Mar 26 01:19:50 2003
+++ phlib-1.18/Makefile.in	Tue Oct 14 10:23:35 2003
@@ -106,7 +106,9 @@
 $(OURLIBSO): $(OBJS) $(HEAD)
 	@echo Creating shared library $(OURLIBSO)
 	@rm -f $@
-	$(LD) -shared -noinhibit-exec -o$@ $(OBJS)
+	$(CC) -shared -o$@.$(VER_MAJOR).$(VER_MINOR) -Wl,-soname=$@.$(VER_MAJOR) $(OBJS)
+	ln -sf $@.$(VER_MAJOR).$(VER_MINOR) $@.$(VER_MAJOR)
+	ln -sf $@.$(VER_MAJOR).$(VER_MINOR) $@
 
 $(OURLIBDB): $(OBJS) $(MDBOBJS) $(HEAD)
 	@echo Creating library $@
@@ -116,15 +118,17 @@
 $(OURLIBDBSO): $(OBJS) $(MDBOBJS) $(HEAD)
 	@echo Creating shared library $@
 	@rm -f $@
-	$(LD) -shared -noinhibit-exec -o$@ $(OBJS) $(MDBOBJS)
+	$(CC) -shared -o$@.$(VER_MAJOR).$(VER_MINOR) -Wl,-soname=$@.$(VER_MAJOR) $(OBJS)
+	ln -sf $@.$(VER_MAJOR).$(VER_MINOR) $@.$(VER_MAJOR)
+	ln -sf $@.$(VER_MAJOR).$(VER_MINOR) $@
 
 $(OBJ)/%.o: %.c $(HEAD)
 	$(CC) $(CFLAGS) -D_XL_LIB_BUILD -o$@	$<
 
 install: $(OURLIB)
 	@./mkinstalldirs $(i_libdir) $(MINC)
-	@./install-lib $(OURLIB) $(OURLIB) $(i_libdir) $(VER_MAJOR) $(VER_MINOR)
-	@./install-lib $(OURLIBSO) $(OURLIBSO) $(i_libdir) $(VER_MAJOR) $(VER_MINOR)
+	@install $(OURLIB) $(i_libdir)/$(OURLIB)
+	@./install-lib $(OURLIBSO).$(VER_MAJOR).$(VER_MINOR) $(OURLIBSO) $(i_libdir) $(VER_MAJOR) $(VER_MINOR)
 	@./install-head $(SINC) $(MINC) $(HEADF)
 
 clean:
